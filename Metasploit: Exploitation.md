# Metasploit: Exploitation

## Scanning (Task 2)


### How many ports are open on the target system?

    5
    
* Give `search portscan` command 

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/f7a47352-4d3a-47fe-a2e3-7188cdbf9b85)

* In the given modules, select `auxiliary/scanner/portscan/tcp` module
* set the remote hosts by using `set rhosts <ip>`. In my case `set rhosts 10.10.165.232`
* Give command `run`

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/f91a9713-76ef-464f-a11e-d125e14159c4)

### Using the relevant scanner, what NetBIOS name can you see?

    ACME IT SUPPORT
    
* Search for NetBIOS command by using `search netbios`

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/2d704485-fdfb-43dd-b534-9844f0c5c87a)

* In the given modules, select `auxiliary/scanner/netbios/nbname` module.
* set the remote hosts by using `set rhosts <ip>`. In my case `set rhosts 10.10.165.232`
* Give command `run`

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/42764ce4-831f-4d75-a46f-a9554ac98075)

### What is running on port 8000?

    webfs/1.21
      
* TCP Port 8000 is commonly used for development environments of web server software
* Thus, we will look for http connection.
* search for `http_version` module.

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/01ccaa39-1a16-4b7a-ba8d-e0420f7b2e4c)

* In the given modules, select `auxiliary/scanner/http/http_version` module.
* set the remote hosts by using `set rhosts <ip>`. In my case `set rhosts 10.10.165.232`
* set `rport` to `8000` as we're looking for 8000 port.
* Give command `run`

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/ca876317-4462-430c-a7bc-d1a895044ee6)

### What is the "penny" user's SMB password? Use the wordlist mentioned in the previous task

    leo1234
    
* As we're looking for SMB password, we will search for module `smb login` by using `search smb login`

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/b175cee1-e8a8-402f-a7d9-a6dde51c823b)

* We can see a module named `auxiliary/scanner/smb/smb_login` suitable for our task and we will select it by using `use` command.
* If we give `show options` command, we can see the `SMBPass` & `SMPUser` fields.

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/5f76d38d-42e1-494e-ba60-2898064e845b)

* set `rhosts`
* set `SMBUser` as `penny`

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/5429b995-15f2-4e74-a8c9-d273852023a8)

* Give the worlists file to `PASS_FILE`
* `set PASS_FILE /usr/share/wordlists/MetasploitRoom/MetasploitWordlist.txt`
* Give `run` command.

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/128cd24d-9e1e-4e79-9666-0218a7eea922)

We got one success password which is the password of user `penny`

## Vulnerability Scanning (Task 4)


### Who wrote the module that allows us to check SMTP servers for open relay?

        Campbell Murray
        
* Search for SMTP open relay module by giving command `search smtp open relay`

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/adb811ef-5c40-493f-acf5-7d51c4feb877)

* select the `auxiliary/scanner/smtp/smtp_relay` module by using `use` command.
* give `info` command for the details of the module.

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/9cdc4e38-deb5-4d67-a00f-51cc58059b56)

There we got the name of who provided this module.

### Exploitation (Task 5)

### Exploit one of the critical vulnerabilities on the target VM?

* Use `windows/smb/ms17_010_eternalblue` module to find out vulnerabilities.
* Give `rhosts` of your ip. In this case, `set rhosts 10.10.201.11` 

![image](https://github.com/tousif13/TryHackMe_Writeups/assets/33444140/c1e71dc1-6ca5-4a70-b8a5-989ed9d6a8bf)

